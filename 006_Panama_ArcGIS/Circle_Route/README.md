===============================================================
Power BI DAX ì½”ë“œ - íŒŒë‚˜ë§ˆ ìš´í•˜ vs ë‚¨ë¯¸ ìš°íšŒ ê²½ë¡œ ì‹œê°í™”
===============================================================

1. ë¨¼ì € ìƒˆ ë°ì´í„° ì„í¬íŠ¸
   - route_points_great_circle.csvë¥¼ Power BIì— ì„í¬íŠ¸

===============================================================
2. í†µí•© ì§€ë„ í…Œì´ë¸” ìƒì„± (ê³„ì‚°ëœ í…Œì´ë¸”)
===============================================================

All_Map_Points = 
UNION(
    -- í•­êµ¬ í¬ì¸íŠ¸ (í° ì , ë…¸ë€ìƒ‰)
    SELECTCOLUMNS(
        port_markers,
        "lat", [lat],
        "lon", [lon],
        "GeoLocation", FORMAT([lat], "0.0000") & "," & FORMAT([lon], "0.0000"),
        "LayerName", "í•­êµ¬",
        "LayerType", [type],
        "DisplayLabel", [port],
        "PointColor", "#FFB900",
        "PointSize", 30,
        "SeqNum", BLANK(),
        "PointType", "port"
    ),
    
    -- ê²½ë¡œ í¬ì¸íŠ¸ (ëŒ€ê¶Œí•­ë¡œ ê¸°ë°˜)
    SELECTCOLUMNS(
        route_points_great_circle,
        "lat", [lat],
        "lon", [lon],
        "GeoLocation", FORMAT([lat], "0.0000") & "," & FORMAT([lon], "0.0000"),
        "LayerName", [route],
        "LayerType", "í•´ìƒê²½ë¡œ",
        "DisplayLabel", IF([point_type] = "waypoint", [location], ""),
        "PointColor", [color],
        "PointSize", 
            SWITCH(
                [point_type],
                "waypoint", 20,      -- ê²½ìœ ì§€: í° ì 
                "intermediate", 8,   -- ì¤‘ê°„ì : ì‘ì€ ì 
                10                   -- ê¸°ë³¸ê°’
            ),
        "SeqNum", [seq],
        "PointType", [point_type]
    )
)

===============================================================
3. ì‹œê°í™” ì„¤ì • (ArcGIS Maps)
===============================================================

í•„ë“œ ë§¤í•‘:
â”œâ”€ ìœ„ì¹˜: All_Map_Points[GeoLocation]
â”œâ”€ í¬ê¸°: All_Map_Points[PointSize]
â”œâ”€ ìƒ‰ìƒ: All_Map_Points[LayerName]
â””â”€ ë„êµ¬ íŒ:
   â”œâ”€ All_Map_Points[DisplayLabel]
   â”œâ”€ All_Map_Points[LayerName]
   â”œâ”€ All_Map_Points[LayerType]
   â””â”€ All_Map_Points[SeqNum]

===============================================================
4. ìƒ‰ìƒ ìˆ˜ë™ ì„¤ì • (ë ˆì´ì–´ íŒ¨ë„)
===============================================================

ë ˆì´ì–´ íŒ¨ë„ â†’ ìƒ‰ìƒ ë¨í”„ í´ë¦­:
- ğŸŸ¡ í•­êµ¬ â†’ #FFB900 (ê¸ˆìƒ‰/ë…¸ë€ìƒ‰)
- ğŸ”µ íŒŒë‚˜ë§ˆ ê²½ìœ  â†’ #0078D4 (íŒŒë€ìƒ‰)
- ğŸ”´ ë‚¨ë¯¸ ìš°íšŒ â†’ #D13438 (ë¹¨ê°„ìƒ‰)

===============================================================
5. ì§€ë„ ìŠ¤íƒ€ì¼ ì„¤ì •
===============================================================

í¬ê¸° ë²”ìœ„:
- ìµœì†Œ: 8 (ì¤‘ê°„ì )
- ìµœëŒ€: 30 (í•­êµ¬)

ì‹¬ë³¼: ì›í˜• (Circle)

===============================================================
6. ì¸¡ì •ê°’ (ê¸°ì¡´ ìœ ì§€)
===============================================================

-- ì„ íƒëœ í•­ë¡œì˜ ê±°ë¦¬
Selected Route Distance = 
CALCULATE(
    AVERAGE(routes_cost[distance_km]),
    ALLSELECTED(routes_cost[route_name])
)

-- ì„ íƒëœ í•­ë¡œì˜ ë¹„ìš©
Selected Route Cost = 
CALCULATE(
    AVERAGE(routes_cost[total_cost]),
    ALLSELECTED(routes_cost[route_name])
)

-- ë¹„ìš© ì ˆê°ì•¡
Cost Savings = 
VAR PanamaCost = CALCULATE(
    AVERAGE(routes_cost[total_cost]),
    routes_cost[via_panama] = TRUE
)
VAR DetourCost = CALCULATE(
    AVERAGE(routes_cost[total_cost]),
    routes_cost[via_panama] = FALSE
)
RETURN DetourCost - PanamaCost

===============================================================
7. ì‚­ì œ/ìˆ¨ê¹€ ì²˜ë¦¬í•  í…Œì´ë¸”
===============================================================

âŒ ì‚­ì œ ë˜ëŠ” ìˆ¨ê¹€:
- route_points_enhanced (ì´ì „ ë²„ì „)
- route_points_with_intermediate (ì„ í˜• ë³´ê°„ ë²„ì „)
- route_line_segments (ì‚¬ìš© ì•ˆ í•¨)
- All_Map_Points_Fixed (ì´ì „ ë²„ì „)
- All_Map_Points_Final (ì´ì „ ë²„ì „)
- Test_Routes_Only (í…ŒìŠ¤íŠ¸ìš©)
- Check_Route_Values (ë””ë²„ê¹…ìš©)

âœ… ìœ ì§€:
- port_markers (í•­êµ¬ ë°ì´í„°)
- route_points_great_circle (ìƒˆë¡œ ì„í¬íŠ¸)
- routes_cost (ë¹„ìš© ë°ì´í„°)
- All_Map_Points (ìƒˆ í†µí•© í…Œì´ë¸”)
- Measures (ì¸¡ì •ê°’ í…Œì´ë¸”)

===============================================================
8. ì˜ˆìƒ ê²°ê³¼
===============================================================

ì§€ë„ì— í‘œì‹œë  í¬ì¸íŠ¸:
- ğŸŸ¡ í•­êµ¬: 5ê°œ (í° ê¸ˆìƒ‰ ì )
- ğŸ”µ íŒŒë‚˜ë§ˆ ê²½ìœ : 31ê°œ (íŒŒë€ ì ì„ , ëŒ€ê¶Œí•­ë¡œ)
- ğŸ”´ ë‚¨ë¯¸ ìš°íšŒ: 31ê°œ (ë¹¨ê°„ ì ì„ , ëŒ€ê¶Œí•­ë¡œ)

ì´ 67ê°œ í¬ì¸íŠ¸ê°€ ì‹¤ì œ í•´ìƒ ê²½ë¡œë¥¼ ë”°ë¼ í‘œì‹œë©ë‹ˆë‹¤.

íŒŒë‚˜ë§ˆ ê²½ìœ ëŠ” ë¶íƒœí‰ì–‘ì„ ê±°ì³ íŒŒë‚˜ë§ˆ ìš´í•˜ë¥¼ í†µê³¼í•˜ê³ ,
ë‚¨ë¯¸ ìš°íšŒëŠ” ë‚¨íƒœí‰ì–‘ì„ ê±°ì³ ë§ˆì ¤ë€ í•´í˜‘ì„ í†µê³¼í•˜ëŠ” 
ì‹¤ì œ í•­ë¡œê°€ ì‹œê°í™”ë©ë‹ˆë‹¤.

===============================================================