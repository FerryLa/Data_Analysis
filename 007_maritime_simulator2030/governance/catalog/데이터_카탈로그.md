# 데이터 카탈로그

## 개요

본 문서는 2030 해상 통신 시뮬레이션 플랫폼에서 사용하는 모든 데이터셋을 정의합니다.

---

## 데이터 계층 구조

### Bronze (원시 데이터)

#### 1. Q-Max 선박 함대 MMSI 데이터

**데이터셋**: `data/bronze/Q-Max_Fleet_MMSI.csv`

| 속성 | 값 |
|------|-----|
| **소스** | MarineTraffic, VesselFinder, MyShipTracking, FleetMon |
| **갱신 주기** | 수동 (선박 정보 변경 시) |
| **형식** | CSV |
| **크기** | 14 rows |
| **보존 기간** | 영구 |

**스키마**:
```csv
vessel_name,imo,mmsi,callsign,flag,build_year,source,verified_date
Mozah,9337755,538003212,V7PD7,Marshall Islands,2008,VesselFinder,2026-01-24
...
```

**필드 정의**:
- `vessel_name`: Q-Max 선박명
- `imo`: IMO 번호 (국제해사기구 선박 식별번호)
- `mmsi`: MMSI 번호 (해상이동업무식별번호, AIS 추적에 사용)
- `callsign`: 무선 호출부호
- `flag`: 선박 국적 (모두 Marshall Islands)
- `build_year`: 건조 연도
- `source`: MMSI 확인 출처
- `verified_date`: 확인 날짜

#### 2. AIS 실시간 스트림 데이터

**데이터셋**: `ais_raw_stream`

| 속성 | 값 |
|------|-----|
| **소스** | AISStream.io WebSocket |
| **갱신 주기** | 실시간 (2-10초) |
| **형식** | JSON |
| **크기** | 스트리밍 (저장 안함) |
| **보존 기간** | 메모리 버퍼만 (1,000개 메시지) |

**스키마**:
```json
{
  "MessageType": "PositionReport",
  "MetaData": {
    "MMSI": "477294700",
    "ShipName": "Q-MAX LNG CARRIER"
  },
  "Message": {
    "PositionReport": {
      "Latitude": 35.1234,
      "Longitude": 129.5678,
      "Cog": 45.0,
      "Sog": 18.5,
      "TrueHeading": 45,
      "NavigationalStatus": 0
    }
  }
}
```

---

### Silver (전처리 데이터)

#### 2. 정규화된 선박 상태

**데이터셋**: `vessel_state_normalized`

| 속성 | 값 |
|------|-----|
| **소스** | AIS 원시 데이터 + 시뮬레이션 |
| **갱신 주기** | 10초 |
| **형식** | Python 객체 (VesselState) |
| **크기** | 메모리 캐시 |
| **보존 기간** | 세션 종료 시까지 |

**스키마**:
```python
VesselState {
    mmsi: str           # MMSI 번호
    vessel_name: str    # 선박명
    vessel_type: str    # 'LNG', 'AMMONIA', 'SMR'
    latitude: float     # 위도 (도)
    longitude: float    # 경도 (도)
    course: float       # 침로 (도, 0-360)
    speed: float        # 속도 (노트)
    heading: float      # 선수방향 (도)
    timestamp: datetime # 시간
    is_simulated: bool  # 시뮬레이션 여부
    data_source: str    # 'AIS', 'SIMULATED_AMMONIA', 'SIMULATED_SMR'
}
```

#### 3. Dead Reckoning 예측 결과

**데이터셋**: `prediction_results`

| 속성 | 값 |
|------|-----|
| **소스** | Dead Reckoning 엔진 |
| **갱신 주기** | 요청 시 |
| **형식** | Python 객체 (PredictionResult) |
| **크기** | 일시적 |

**스키마**:
```python
PredictionResult {
    predicted_latitude: float   # 예측 위도
    predicted_longitude: float  # 예측 경도
    error_radius_95: float      # 95% 오차 반경 (미터)
    error_radius_50: float      # 50% 오차 반경 (미터)
    time_since_last_fix: float  # 경과 시간 (초)
    prediction_confidence: float # 신뢰도 (0-1)
    wind_drift_m: tuple         # 바람 드리프트 (동-서, 남-북)
    current_drift_m: tuple      # 해류 드리프트 (동-서, 남-북)
}
```

#### 4. 통신 성능 지표

**데이터셋**: `communication_metrics`

| 속성 | 값 |
|------|-----|
| **소스** | 시나리오 컨트롤러 |
| **갱신 주기** | 패킷 전송마다 |
| **형식** | 딕셔너리 |

**스키마**:
```python
{
    'total_packets': int        # 총 패킷 수
    'lost_packets': int         # 손실 패킷 수
    'total_delay_ms': float     # 총 지연 시간
    'blackout_events': int      # 블랙아웃 이벤트 수
    'reliability_index': float  # 신뢰성 지수 (0-100)
    'average_latency_ms': float # 평균 지연 (밀리초)
    'packet_loss_rate': float   # 패킷 손실률 (0-1)
}
```

---

### Gold (최종 분석 데이터)

#### 5. 위반 이벤트 로그

**데이터셋**: `violation_events`

| 속성 | 값 |
|------|-----|
| **소스** | SMR 선박 시뮬레이터 |
| **갱신 주기** | 이벤트 발생 시 |
| **형식** | JSON |
| **저장 위치** | `data/gold/violations.json` |

**스키마**:
```json
{
  "timestamp": "2026-01-24T12:34:56Z",
  "event_type": "CORRIDOR_DEVIATION",
  "severity": "CRITICAL",
  "latitude": 48.5,
  "longitude": -145.2,
  "details": {
    "deviation_distance_m": 2500,
    "corridor_width_m": 20000,
    "threshold_m": 2000
  }
}
```

**이벤트 타입**:
- `CORRIDOR_DEVIATION`: 통로 이탈
- `GEOFENCE_VIOLATION`: 지오펜스 위반
- `SPEED_VIOLATION`: 속도 위반

**심각도 수준**:
- `INFO`: 정보성
- `WARNING`: 경고
- `CRITICAL`: 중대

---

## 데이터 품질 규칙

### AIS 데이터 검증

1. **위도 범위**: -90 ~ 90
2. **경도 범위**: -180 ~ 180
3. **속도 범위**: 0 ~ 50 노트 (LNG 선박)
4. **침로 범위**: 0 ~ 360도
5. **MMSI 형식**: 9자리 숫자

### 시뮬레이션 데이터 검증

1. **시간 순서**: 타임스탬프 단조 증가
2. **위치 연속성**: 급격한 위치 점프 없음 (텔레포트 방지)
3. **속도 일관성**: 가속도 제한 준수
4. **지오펜스 준수**: SMR 선박 통로 제약 검증

---

## 데이터 접근 정책

### 공개 데이터

- ✅ 시뮬레이션 데이터 (암모니아, SMR)
- ✅ 통신 성능 지표
- ✅ 집계된 통계

### 제한 데이터

- ⚠️ 실시간 AIS 데이터
  - AISStream 이용약관 준수 필요
  - 연구 목적만 사용
  - 재배포 금지

### 민감 데이터

- 🔒 없음 (본 프로젝트는 민감 정보 미포함)

---

## 데이터 계보 (Lineage)

```
AIS Stream → 정규화 → 선박 상태 캐시 → 시각화
               ↓
         Dead Reckoning → 예측 결과 → 오차 분석
               ↓
         시나리오 컨트롤러 → 통신 지표 → 대시보드

시뮬레이션 엔진 → 선박 상태 → 위반 감지 → 이벤트 로그
```

상세 계보는 `governance/lineage/` 참조

---

## 메타데이터

### 데이터셋 소유자

- **담당자**: Maritime Systems Research Team
- **연락처**: GitHub Issues
- **마지막 갱신**: 2026-01-24

### 규정 준수

- **라이선스**: MIT License
- **개인정보**: 없음 (선박 식별 정보만)
- **수출 통제**: 해당 없음

---

**작성일**: 2026-01-24
**버전**: 1.0
