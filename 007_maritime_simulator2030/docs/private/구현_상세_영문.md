# 🚢 Maritime Communication Simulator 2030

**2030년 혼합 차세대 선박 환경을 위한 AIS + 위성 통신 인프라 평가 플랫폼**

[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Research](https://img.shields.io/badge/Status-Research-orange.svg)](https://github.com)

---

## 📋 프로젝트 개요

이 시뮬레이터는 **AIS + 위성 통신 기반 인프라가 2030년의 혼합 차세대 선박 환경을 안정적으로 지원할 수 있는지 평가**하기 위한 연구용 플랫폼입니다.

실제 AIS 스트림과 합성 시뮬레이션을 결합해 다음을 분석합니다:
- 통신 한계
- Dead Reckoning 예측 정확도
- 지오펜스 성능
- 신호 가용성 지수

---

## 🎯 연구 질문

**"기존 AIS + 위성 통신 프레임워크가 LNG, 암모니아 연료선, SMR 선박을 포함한 혼합 함대를 2030년에도 신뢰성 있게 지원할 수 있는가?"**

### 평가 항목

- ✅ 신호 손실 행동
- ✅ Dead Reckoning 예측 정확도
- ✅ 통신 지연 영향
- ✅ 지오펜스 모니터링 성능
- ✅ 추적 신뢰성 지수

---

## 🚀 빠른 시작

### 설치 (3단계)

```bash
# 1. 의존성 설치
pip install -r requirements.txt

# 2. 환경 변수 설정
cp .env.example .env
# .env 파일에 AISStream API 키 입력

# 3. 실행
streamlit run app.py
```

브라우저에서 `http://localhost:8501` 열림

### AISStream API 키 발급

1. [https://aisstream.io](https://aisstream.io) 접속
2. 무료 계정 생성
3. API 키 복사 → `.env` 파일에 붙여넣기

---

## 🏗️ 시스템 아키텍처

### 통합 선박 구성

| 선박 타입 | 수량 | 데이터 소스 | 특징 |
|-----------|------|-------------|------|
| **Q-Max LNG** | 14척 | 실시간 AIS (AISStream) | 세계 최대 LNG 운반선 |
| **암모니아 연료선** | 5척 | 경로 기반 시뮬레이션 | 차세대 그린 연료 |
| **SMR 추진 선박** | 1척 | 통로 제약 시뮬레이션 | 가상 원자력 추진 |

### 핵심 모듈

```
maritime_comm_simulator_2030/
│
├── ais_client.py              # AISStream WebSocket 클라이언트
├── simulation_ammonia.py      # 암모니아 선박 시뮬레이터
├── simulation_smr.py          # SMR 선박 시뮬레이터
├── prediction_engine.py       # Dead Reckoning 엔진
├── scenario_controller.py     # 통신 시나리오 제어
├── app.py                     # Streamlit 웹 인터페이스
├── config.py                  # 설정 관리
│
├── requirements.txt           # Python 의존성
├── .env.example               # 환경 변수 템플릿
│
├── ARCHITECTURE.md            # 상세 아키텍처 문서
├── USER_GUIDE.md              # 사용자 가이드
└── README_SIMULATOR.md        # 이 파일
```

---

## 🧮 수학적 기반

### Dead Reckoning (대권항법)

선박의 마지막 알려진 위치, 속도, 침로로부터 현재 위치를 예측:

```
φ₂ = asin(sin(φ₁)·cos(δ) + cos(φ₁)·sin(δ)·cos(θ))
λ₂ = λ₁ + atan2(sin(θ)·sin(δ)·cos(φ₁), cos(δ) - sin(φ₁)·sin(φ₂))

여기서:
  φ = 위도 (라디안)
  λ = 경도 (라디안)
  δ = 각거리 = d/R
  θ = 진침로 (라디안)
```

### 오차 누적 모델

시간에 따른 위치 오차:

```
σ_total(t) = √(σ_sensor² + σ_course²·t² + σ_speed²·t²)

95% 신뢰 반경:
r₉₅(t) = 2.45 · σ_total(t)
```

### 통신 신뢰성 지수

```
SAI (Signal Availability Index) = (T_connected / T_total) × 100%

PFS (Position Freshness Score) = e^(-λ·Δt)
```

상세 수식은 `ARCHITECTURE.md` 참조

---

## 📊 주요 기능

### 1. 실시간 지도 시각화

- 🗺️ Folium 기반 인터랙티브 지도
- 🎨 선박 타입별 색상 구분 (LNG: 파랑, 암모니아: 초록, SMR: 빨강)
- 📍 Dead Reckoning 오차 반경 원
- 🧭 선박 침로 방향 표시

### 2. 통신 시나리오

4가지 사전 정의 시나리오:

1. **정상 조건** - VSAT, 중간 해상, 저하 0%
2. **악천후** - VSAT, 거친 해상, 저하 60%
3. **LEO 위성 핸드오버** - Starlink 스타일, 저하 30%
4. **중대 장애** - AIS만, 높은 해상, 저하 90%, 블랙아웃

### 3. 성능 지표

- **신호 가용성 지수 (SAI)**: 0-100%
- **평균 지연**: 밀리초 단위
- **패킷 손실률**: 백분율
- **예측 오차**: 미터 단위
- **블랙아웃 지속 시간**: 초 단위

### 4. 지오펜스 모니터링

- ⚠️ 금지 구역 진입 감지
- 🚦 제한 구역 속도 위반 감지
- 📏 항로 이탈 거리 계산
- 📝 위반 이벤트 로그

---

## 🛠️ 기술 스택

| 카테고리 | 기술 |
|----------|------|
| **언어** | Python 3.10+ |
| **웹 프레임워크** | Streamlit |
| **지도 시각화** | Folium, PyDeck |
| **데이터 처리** | NumPy, Pandas, SciPy |
| **지리 공간** | Shapely, Geopy |
| **통신** | WebSockets (AISStream) |
| **차트** | Plotly |

---

## 📈 사용 예시

### 기본 시뮬레이션 실행

```bash
streamlit run app.py
```

### 개별 모듈 테스트

```bash
# Dead Reckoning 엔진
python prediction_engine.py

# 암모니아 선박 시뮬레이션
python simulation_ammonia.py

# SMR 선박 시뮬레이션
python simulation_smr.py

# 시나리오 컨트롤러
python scenario_controller.py
```

### 프로그래밍 방식 사용

```python
from prediction_engine import DeadReckoningEngine

# Dead Reckoning 예측
engine = DeadReckoningEngine()

prediction = engine.predict_position(
    last_latitude=35.0,
    last_longitude=129.0,
    course_deg=45.0,
    speed_knots=20.0,
    time_elapsed_seconds=600,  # 10분
    wind_speed_knots=25.0,
    wind_direction_deg=270.0
)

print(f"예측 위치: {prediction.predicted_latitude}, {prediction.predicted_longitude}")
print(f"95% 오차 반경: {prediction.error_radius_95}m")
```

---

## 🔬 연구 활용

### 분석 가능한 지표

1. **위치 정확도**
   - Mean Positional Error (MPE)
   - Root Mean Square Error (RMSE)
   - 95th percentile error

2. **통신 성능**
   - Signal Availability Index (SAI)
   - Packet loss rate under various conditions
   - Latency distribution

3. **예측 정확도**
   - Dead Reckoning error vs. time
   - Confidence interval validation
   - Environmental impact analysis

### 데이터 내보내기

```python
# 위반 로그 JSON 내보내기
simulator.export_violation_log("violations.json")

# 통계 데이터프레임
import pandas as pd
stats_df = pd.DataFrame(controller.get_statistics())
stats_df.to_csv("communication_stats.csv")
```

---

## 🎓 교육 자료

- **ARCHITECTURE.md**: 상세 시스템 설계 및 수학적 배경
- **USER_GUIDE.md**: 단계별 사용 가이드
- **코드 주석**: 모든 모듈에 상세한 docstring 포함

---

## ⚠️ 제약 사항 및 면책

### 사용 목적

- ✅ 학술 연구
- ✅ 기술 평가
- ✅ 교육 목적
- ❌ 실제 항해 의사결정
- ❌ 상업적 선박 추적

### 데이터 소스 제약

- **AIS 데이터**: AISStream 무료 티어 사용 (이용약관 준수 필요)
- **시뮬레이션 데이터**: 완전 합성 (실제 선박 아님)
- **SMR 선박**: 가상 시나리오 (현재 상용화되지 않음)

### 정확도 한계

- Dead Reckoning은 실제 환경 조건을 완벽히 반영하지 못함
- 통신 모델은 단순화된 가정 포함
- 지오펜스는 규제 정책을 대표하지 않음

---

## 🚧 향후 개발 계획

- [ ] 머신러닝 기반 궤적 예측 (LSTM)
- [ ] 다중 선박 충돌 회피 (COLREGS)
- [ ] 위성 커버리지 히트맵
- [ ] 사이버 보안 시나리오 (AIS 스푸핑)
- [ ] 실시간 날씨 API 통합
- [ ] PostgreSQL/TimescaleDB 백엔드
- [ ] RESTful API 엔드포인트
- [ ] Docker 컨테이너화

---

## 🤝 기여

이 프로젝트는 연구 프로토타입입니다. 기여를 환영합니다!

### 개선 제안

- GitHub Issues에 버그 리포트 또는 기능 요청 제출
- Pull Request 환영 (코드 리뷰 필수)

---

## 📄 라이선스

MIT License

Copyright (c) 2026 Maritime Systems Research Team

상세 내용은 `LICENSE` 파일 참조

---

## 📚 참고 문헌

### 표준 및 규격

- ITU-R M.1371: AIS Technical Characteristics
- IEC 61162: Maritime Navigation Equipment
- SOLAS Chapter V: Safety of Navigation
- IALA Guideline 1082: AIS Service Overview

### 학술 자료

- Navigation Theory and Dead Reckoning
- Gilbert-Elliott Packet Loss Model
- Marine Communication Systems
- Satellite Constellation Design

---

## 🌐 관련 링크

- [AISStream.io](https://aisstream.io) - 실시간 AIS 데이터
- [Streamlit Documentation](https://docs.streamlit.io)
- [Folium Documentation](https://python-visualization.github.io/folium/)
- [Shapely Documentation](https://shapely.readthedocs.io/)

---

## 📞 지원 및 문의

- **기술 지원**: GitHub Issues
- **문서 오류**: Pull Request
- **일반 문의**: 프로젝트 유지 관리자에게 연락

---

**Built with ❤️ for Maritime Research Community**

**Version**: 1.0.0
**Last Updated**: 2026-01-24
